# Проводим викторину
Данный проект предствляет собой `викторину`, которая реализована посредством ботов на 2-х платформах: `VK` и `Telegram`.

Вы можете ознакомиться с работой ботов по ссылкам [vk-бот](https://vk.com/im?media=&sel=-216402426) и [telegram-бот](https://t.me/norgius_speech_bot)

## Что необходимо для запуска
Для данного проекта необходим `Python3.6` (или выше).
Создадим виртуальное окружение в корневой директории проекта:
```
python3 -m venv env
```
После активации виртуального окружения установим необходимые зависимости:
```
pip install -r requirements.txt
```
Также заранее создадим файл `.env` в директории проекта.

## Создаём ботов
Напишите [отцу ботов](https://telegram.me/BotFather) для создания телеграм бота.

Запишите его токен в `.env`:
```
QUIZ_BOT_TG_TOKEN=
```
Для создания VK-бота для начала создадим группу, в которой уже потом запустим самого бота. В `управлении` созданной группы во вкладке `сообщения` убедимся, что сами сообщения включены, добавим их в левое меню и запишем преветствие.

Для получения `API токена` необходимо создать ключ во вкладке настроек `Работа с API`. Разрешим приложению `доступ к сообщениям сообщества`. Запишем токен в файл `.env`:
```
QUIZ_BOT_VK_TOKEN=
```
## Подключаем Redis
Регистрируемся на [Redis](https://redis.com/) и заводим себе удаленную `базу данных`. Для подключения к ней вам понадобятся `host`, `port` и `password`. Запишите их в файле `.env`:
```
REDIS_HOST=
REDIS_PORT=
REDIS_PASSWORD=
```
## Загружаем вопросы викторины на Redis
Для загрузки вопросов нам понадобиться файл `load_quiz_questions_to_redis.py`. Но перед его запуском нужно записать в `.env` некоторые параметры:
* `QUIZ_QUESTIONS_FOLDER` - название папки, в которой будут лежать файлы с вопросами и ответами викторины.
* `QUIZ_FILES_NUMBER` - количество файлов, которые вы хотите загрузить на Redis, если вы не укажете это значение, то будут задействованы все файлы.

Теперь можно запустить файл и подожать загрузки файлов:
```
python load_quiz_questions_to_redis.py
```
 За 1 минуту загружается примерно 400 вопросов, если у вас их тысячи, то придётся подождать.
 
 После завершения загрузки файлов на `Redis` в консоль вам придёт уведомление с количеством вопросов, запишите это число в `.env`:
 ```
 QUESTIONS_AMOUNT=
 ``` 
## Запуск ботов
Боты запускаются командами
```
python tg_bot.py
python vk_bot.py 
```
Для того, чтобы подключиться к `телеграм боту` нужно ввести `/start`, для выхода из диалога с ботом - `/exit`.

У `VK бота` есть только стандартное приветствие на сообщение `Привет` со стороны пользователя.